<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="www.dao.CommunityDao">
<!--   <select id="selectBlog" resultType="Blog">
    select * from Blog where id = #{id}
  </select> -->
  
  <insert id="communityinsert" parameterType="www.dto.CommunityVo">
  insert into COMMUNITY(IDX,ID,NICK,CTITLE,CONTENTS,SDATE,EDATE,CDATE,CHITCOUNT,CREPORTCOUNT,CPLACE,CAR,ATTENDEE,GENDER)
  values(COMMUNITY_SEQ.NEXTVAL,#{id},#{nick},#{ctitle},#{contents},#{sdate},#{edate},sysdate,#{chitcount},#{creportcount},#{cplace},#{car},#{attendee},#{gender})
  
  </insert>
  
  <select id="oneCommunity" parameterType="Integer" resultType="www.dto.CommunityVo">
  
  select * from COMMUNITY where idx=#{idx}
  
  </select>
  
   <select id="ccomment" parameterType="Integer" resultType="www.dto.CommentVo">
  
  select * from ccomment where LINKEDIDX=#{idx} order by idx
  
  </select>
  
  
  <insert id="ccommentinsert" parameterType="www.dto.CommentVo">
  insert into CCOMMENT(IDX,NICK,CONTENTS,CDATE,LINKEDIDX)
  values(CCOMMENT_SEQ.NEXTVAL,#{nick},#{contents},sysdate,#{linkedidx})
  
  </insert>
  <delete id="deleteccomment" parameterType="Integer">
  delete from CCOMMENT where idx=#{idx}
  </delete>
  
  <delete id="deletecommunity" parameterType="Integer">
  delete from COMMUNITY where idx=#{idx}
  </delete>
  
  <update id="updatecommu" parameterType="www.dto.CommunityVo">
  update community set ctitle=#{ctitle},contents=#{contents},sdate=#{sdate},edate=#{edate},cplace=#{cplace},car=#{car},attendee=#{attendee},gender=#{gender} where idx=#{idx}
  
  </update>
  
  <select id="csearch" resultType="www.dto.CommunityVo" parameterType="www.dto.CommunityVo">
  
  select * from community where 1=1
  <if test="cplace neq '지역'">
  	and cplace=#{cplace}
  </if> 
  <if test="gender neq 'anything'">
  	and gender=#{gender}
  </if> 
<!--   <if test="sdate neq null">
  	and sdate=#{sdate}
  </if> 
  <if test="edate neq null">
  	and edate=#{edate}
  </if> 	
  
  <if test="ctitle neq '전체'">
  	and ctitle=#{ctitle}
  </if>
  
  <if test="ctitle eq '제목'">
  	and ctitle=#{ctitle}
  </if>
  <if test="ctitle eq'내용'">
  	and contents=#{contents}
  </if>
  <if test="ctitle eq '닉네임'">
  	and nick=#{nick}
  </if>  -->
  </select>
  
  
</mapper>